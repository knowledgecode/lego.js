/*
 lego.js v0.1.1 (c) 2012 knowledgecode | MIT licensed
*/
(function(o){var g={},k={},f={},l=[],p,q=o.document,r=o.location,s=r.protocol+"//"+r.host,u,v,i,h,t,m,n,w,j;i=function(b){return b.replace(/\/[^\/]*\/?$/,"/")};h=function(b,a){if(/^(https?|file):\/\//.test(b))return b;if(/^\.{1,2}\//.test(b)){for(a=a||u;0===b.indexOf("../");)b=b.substring(3),a=i(a);for(;0===b.indexOf("./");)b=b.substring(2)}else a=0===b.indexOf("/")?"":a||v;return s+a+b};t=function(){var b=function(){},a=function(){};return function(c){var e=new b;a.prototype=(k[c]||{}).exports;e.exports=
new a;return e}}();m=function(b,a,c){var e=0,d,a=a||function(){};if(b){c=t(j(c));c.id=b;c.uri=f[b];a(n,c.exports,c);for(k[b]=c;l[e];){a=l[e];d=a.deps;for(c=0;d[c];)d[c]===b?d.splice(c,1):c+=1;0===c?(c=a.id,d=a.callback,a=a.base,l.splice(e,1),m(c,d,a),e=0):e+=1}}else a(n)};n=function(b){return(k[j(b)]||{}).exports};w=function(b,a,c,e){var d=0,a=a||[];for(a.push(e);a[d];)a[d]=j(a[d]),k[a[d]]?a.splice(d,1):d+=1;if(0===d)m(b,c,e);else{l.push({id:b,deps:a,callback:c,base:e});for(d=0;a[d];)b=f[a[d]],f[b]||
(f[b]=a[d],g.add(b)),d+=1}};j=function(b){var a;b&&(a=b.replace(/(^.*\/|\.js$)/g,""),f[a]=f[a]||h(b)+".js");return a};u=function(){for(var b=0,a=q.getElementsByTagName("script"),c,e,d;a[b];){c=a[b].src;if(/(^|\/)lego\.js$/.test(c)){d=i(r.pathname.replace(/\\/g,"/")+" ");e=i(h(c,d).replace(s,""));v=h(a[b].getAttribute("data-url")||e+"lego_modules/",d).replace(s,"");break}b+=1}return e}();g.add=function(b,a){var c=q.createElement("script");c.src=b;c.readyState?c.onreadystatechange=function(){var b=
c.readyState;if("complete"===b||"loaded"===b)c.onreadystatechange=null,a=a&&a()}:c.onload=function(){a=a&&a()};q.getElementsByTagName("head")[0].appendChild(c)};g.define=function(b,a,c,e){var d=arguments.length;w.apply(this,[void 0,void 0,b,a,c,e].slice(3<d?2:d-1))};g.ln=function(b,a){f[b]=h(a)+".js"};g.test=function(b,a){return p[b]&&p[b].apply(this,a||[])};p={ascend:i,getAbsUri:h,create:t,load:m,require:n,normalize:j};o.lego=g})(this);
